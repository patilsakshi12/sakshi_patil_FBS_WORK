1) Create the table Member, Books and Issue without any constraints as
mentioned in the schema description above.

mysql> create table Member(
    -> Member_Id int,
    -> Member_Name varchar(30),
    -> Member_address varchar(50),
    -> Acc_Open_Date Date,
    -> Membership_type varchar(20),
    -> Fees_paid int,
    -> Max_Books_Allowed int,
    -> Penalty_Amount Decimal(7,2));

mysql> Create table Books(
    -> Book_No int,
    -> Book_Name varchar(30),
    -> Author_name varchar(30),
    -> Cost Decimal(7,2),
    -> Category char(10));

mysql> Create table Issue(
    -> Lib_Issue_Id int,
    -> Book_NO int,
    -> Member_Id int,
    -> Issue_Date date,
    -> Return_date Date);

2) View the structure of the tables.
mysql> desc Member;
mysql> desc Books;
mysql> desc Issue;

3) Drop the Member table
mysql> drop table member;

4) Create the table Member again as per the schema description with the
following constraints.
a. Member_Id – Primary Key
b. Membership_type - ‘Lifetime’,’ Annual’, ‘Half Yearly’,’ Quarterly’

mysql> create table Member(
    -> Member_Id int primary key,
    -> Member_Name varchar(30),
    -> Member_address varchar(50),
    -> Acc_Open_Date Date,
    -> Membership_type varchar(20) check(Membership_type in('Lifetime','Annual','Half Yearly','Quarterly')),
    -> Fees_paid int,
    -> Max_Books_Allowed int,
    -> Penalty_Amount Decimal(7,2));

5) Modify the table Member increase the width of the member name to 30
characters.

mysql> alter table Member
    -> modify column member_name varchar(30);

6) Add a column named as Reference of Char(30) to Issue table.

mysql> alter table Issue
    -> add column Reference char(30);

7) Delete/Drop the column Reference from Issue.
mysql> alter table issue
    -> drop column Reference;

8) Rename the table Issue to Lib_Issue.
mysql> rename table Issue to Lib_Issue;

9) Insert following data in table Member
mysql> insert into Member(Member_Id, Member_Name, Member_address, Acc_Open_Date, Membership_type, Fees_paid, Max_Books_Allowed, Penalty_Amount)
    -> values(1,'Richa Sharma','pune','2012-12-05','Lifetime',25000,5,50),
    -> (2,'Garima Sen','Pune', Current_date,'Annual',1000,3,Null);

10) Insert at least 5 records with suitable data.
mysql> INSERT INTO Member(Member_Id, Member_Name, Member_Address, Acc_Open_Date, Membership_type, Fees_Paid, Max_Books_Allowed, Penalty_Amount)
VALUES(3, 'Amit Verma', 'Mumbai', '2023-05-10', 'Half Yearly', 1500, 4, 20),
(4, 'Neha Gupta', 'Delhi', '2024-01-15', 'Annual', 1200, 3, 0),
(5, 'Rohan Mehta', 'Pune', '2022-09-20', 'Quarterly', 500, 2, 10),
(6, 'Priya Nair', 'Chennai', '2021-07-25', 'Lifetime', 30000, 6, 0),
(7, 'Vikas Singh', 'Bangalore', '2023-11-30', 'Annual', 1000, 3, 5);

11) Modify the column Member_name. Decrease the width of the member
name to 20 characters. (If it does not allow state the reason for that)

mysql> alter table Member
    -> modify column Member_Name varchar(20);

12) Try to insert a record with Max_Books_Allowed = 110, Observe the
error that comes.
 
mysql> INSERT INTO Member(Member_Id, Member_Name, Member_Address, Acc_Open_Date, Membership_type, Fees_Paid, Max_Books_Allowed, Penalty_Amount)VALUES
    -> (8,"Sakshi","Pune", "2025-04-22", "Lifetime", 34000, 110,30);
ERROR 3819 (HY000): Check constraint 'chk_max_books_allowed' is violated.

13) Generate another table named Member101 using a Create command
along with a simple SQL query on member table.

mysql>  create table Member101 as
    -> select*from Member;


14) Add the constraints on columns max_books_allowed and penalty_amt
as follows
a. max_books_allowed < 100
b. penalty_amt maximum 1000
Also give names to the constraints.

mysql> alter table Member
    -> add constraint chk_max_books_allowed check(Max_Books_Allowed <100),
    ->  add constraint chk_penalty_amount check(Penalty_Amount <=1000);

15) Drop the table books.
mysql> drop table books;

16) Create table Books again as per the schema description with the
following constraints.
a. Book_No – Primary Key
b. Book_Name – Not Null
c. Category – System, Fiction, Database, RDBMS, Others.

mysql> create table Books(
    -> Book_No int primary key,
    -> Book_Name varchar(30) not null,
    -> Author_Name Varchar(30),
    -> Cost decimal(7,2),
    -> Category char(10) check(Category In('System','Fiction','Database','RDBMS','Others'))
    -> );

17) Insert data in Book table as follows:
mysql> Insert into Books(Book_No,Book_Name,Author_Name,Cost,Category) Values
    -> (101,'Let us C','Denis Ritchie', 450,'System'),
    -> (102,'Oracle-Complete Ref','Loni',550,'Database'),
    -> (103,'Mastering SQL','Loni',250,'Database'),
    -> (104,'PL SQL-Ref','Scott Urman',750,'Database');

18) Insert more records in Book table.
mysql> Insert into Books(Book_No,Book_Name,Author_Name,Cost,Category) Values
    -> (106,'Database Concepts','Korth',650,'Database'),
    -> (107,'Operating System','Galvin',500,'System');

19) View the data in the tables using simple SQL query.

mysql> table Books;

20) Insert into Book following data.
105, National Geographic, Adis Scott, 1000, Science

mysql> Insert into Books(Book_No,Book_Name,Author_Name,Cost,Category) Values
    -> (105,'National Geographic','Adis Scott',1000,'Science');
ERROR 3819 (HY000): Check constraint 'books_chk_1' is violated.

21) Rename the table Lib_Issue to Issue.
mysql> Rename Table Lib_Issue to Issue;

22) Drop table Issue.
mysql> Drop Table Issue;

23) As per the given structure Create table Issue again with following
constraints.

 Lib_Issue_Id-Primary key
 Book_No- foreign key
 Member_id - foreign key
 Issue_date
 Return_date

mysql> Create table Issue(
    -> Lib_Issue_Id int primary key,
    -> Book_No int,
    -> Member_id int,
    -> Issue_date date,
    -> Return_Date date,
    -> foreign key (Book_No) References Books(Book_No),
    -> foreign key (Member_id) References Member(Member_id)
    -> );

24) Insert following data into Issue table.
mysql> Insert into Issue (Lib_Issue_Id,Book_No,Member_id,Issue_date) Values
    -> (7001,101,1,'2006-12-10'),
    -> (7002,102,2,'2006-12-25'),
    -> (7003,104,1,'2006-01-15'),
    -> (7004,101,1,'2006-06-04'),
    -> (7005,104,2,'2006-11-15'),
    -> (7006,101,3,'2006-02-18');

25) Remove the constraints on Issue table
mysql> Alter table Issue
    -> drop primary key;
mysql> Alter table Issue
    -> drop foreign key issue_ibfk_1;
mysql> Alter table Issue
    -> drop foreign key issue_ibfk_2;

26) Insert a record in Issue table. The member_id should not exist in
     member table.
mysql> Insert into Issue (Lib_Issue_Id,Book_No,Member_id,Issue_date) Values
    -> (7007,103,99,'2006-12-30');

27) Now enable the constraints of Issue table. Observe the error
  mysql> Alter table Issue
    -> add primary key(Lib_Issue_Id);

  mysql> Alter table Issue
    -> add constraint foreign key(Book_No) References Books(Book_No);

mysql> Alter table Issue
    -> add constraint fk_member foreign key(Member_id) References Member(Member_id);
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`fbs`.`#sql-1448_9`, CONSTRAINT `fk_member` FOREIGN KEY (`Member_id`) REFERENCES `member` (`Member_Id`))

28) Delete the record inserted at Q-27) and enable the constraints.
mysql> delete from Issue where Lib_Issue_Id=7007;

  mysql> Alter table Issue
    -> add constraint foreign key(Book_No) References Books(Book_No);

mysql> Alter table Issue
    -> add constraint foreign key(Member_id) References Member(Member_id);


29) Try to delete the record of member id 1 from member table and
observe the error
mysql> delete from member where member_id=1;
ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`fbs`.`issue`, CONSTRAINT `issue_ibfk_2` FOREIGN KEY (`Member_id`) REFERENCES `member` (`Member_Id`))

30) View the data and structure of all the three tables Member,Issue, Book.
    mysql> Table Member;
    mysql> Table Books;
    mysql> Table Issue;

    mysql> desc Member;
    mysql> desc Books;
    mysql> desc Issue;

31) Modify the Return_Date of 7004,7005 to 15 days after the Issue_date.
  
mysql> update Issue
    -> set Return_Date= Date_Add(issue_Date, Interval 15 DAY)
    -> where Lib_Issue_Id in(7004,7005);

32) Remove all the records from Issue table where member_ID is 1

and Issue date in before 10-Dec-06.

mysql> Delete from Issue
    -> where member_Id=1
    -> And Issue_date< '2006-12-10';

33) Remove all the records from Book table with category other than RDBMS and Database.
mysql> delete from Books
    -> where Category NOT IN ('RDBMS','Database');

34) Remove the table Member.
mysql> Drop Table Member;

35) Remove the table Book.
mysql> drop table Books;